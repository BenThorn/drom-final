<!DOCTYPE HTML>
<html lang="en">

<head>
	<title>Drom Highscores</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<meta charset="UTF-8" />
</head>

<body>
	<h1>LEADERBOARD</h1>
	<h2 id="teamLabel">Team Name</h2>
	<h2>Score</h2>
	<h3>Highest<br />Streak</h3>
	<div id="scores">
		<div id="rankOne" class="data">
			<p class="number">1</p>
			<p class="teamName" id="teamOneName">Team Name</p>
			<p class="teamScore" id="teamOneScore">1000</p>
			<p class="teamStreak">100</p>
		</div>
		<div id="rankTwo" class="data">
			<p class="number">2</p>
			<p class="teamName" id="teamTwoName">Team Name</p>
			<p class="teamScore" id="teamTwoScore">1000</p>
			<p class="teamStreak">100</p>
		</div>
		<div id="rankThree" class="data">
			<p class="number">3</p>
			<p class="teamName" id="teamThreeName">Team Name</p>
			<p class="teamScore" id="teamThreeScore">1000</p>
			<p class="teamStreak">100</p>
		</div>
		<div id="rankFour" class="data">
			<p class="number">4</p>
			<p class="teamName" id="teamFourName">Team Name</p>
			<p class="teamScore" id="teamFourScore">1000</p>
			<p class="teamStreak">100</p>
		</div>
		<div id="rankFive" class="data">
			<p class="number">5</p>
			<p class="teamName" id="teamFiveName">Team Name</p>
			<p class="teamScore" id="teamFiveScore">1000</p>
			<p class="teamStreak">100</p>
		</div>
		<div id="rankSix" class="data">
			<p class="number">6</p>
			<p class="teamName" id="teamSixName">Team Name</p>
			<p class="teamScore" id="teamSixScore">1000</p>
			<p class="teamStreak">100</p>
		</div>
		<div id="rankSeven" class="data">
			<p class="number">7</p>
			<p class="teamName" id="teamSevenName">Team Name</p>
			<p class="teamScore" id="teamSevenScore">1000</p>
			<p class="teamStreak">100</p>
		</div>
		<div id="rankEight" class="data">
			<p class="number">8</p>
			<p class="teamName" id="teamEightName">Team Name</p>
			<p class="teamScore" id="teamEightScore">1000</p>
			<p class="teamStreak">100</p>
		</div>
		<div id="rankNine" class="data">
			<p class="number">9</p>
			<p class="teamName" id="teamNineName">Team Name</p>
			<p class="teamScore" id="teamNineScore">1000</p>
			<p class="teamStreak">100</p>
		</div>
		<div id="rankTen" class="data">
			<p class="number">10</p>
			<p class="teamName" id="teamTenName">Team Name</p>
			<p class="teamScore" id="teamTenScore">1000</p>
			<p class="teamStreak">100</p>
		</div>
	</div>
	<div id="input">
		<input type="text" id="team" placeholder="Team Name" />
		<input type="number" id="score" placeholder="Team Score" />
		<button onclick="rank()"></button>
	</div>
	<script src="script.js"></script>
	<script>
		/*reference info
		const tweeds = $('#domos');
		if (tweeds) {
			//poll for updates every 5 seconds
			setInterval(getUpdates, 5000);
		}*/

		const getUpdate = () => {
			$.ajax({
				cache: false,
				type: "GET",
				url: '/getScores',
				dataType: "json",
				success: (result, status, xhr) => {
					console.dir(result);

					if (!result.id) {
						return;
					}

					const added = document.getElementById(result.id);

					if (!added) {
						const div = document.createElement('div');
						div.id = result.id;
						div.classList.add('domo');

						//add the user's name
						const user = document.createElement('h3');
						user.textContent = result.name;
						user.classList.add('domoName');

						//add the user's tweed message
						const tweed = document.createElement('h3');
						tweed.textContent = result.tweed;
						tweed.classList.add('domoAge');

						//attach to our new tweed div
						div.appendChild(user);
						div.appendChild(tweed);

						//grab domo div
						const list = document.querySelector('#domos').children[0];
						//insert at the top so it's the first displayed
						list.insertBefore(div, list.firstChild);
					}
				},
				error: (xhr, status, error) => {
					const messageObj = JSON.parse(xhr.responseText);

					handleError(messageObj.error);
				}
			});
		};

	</script>
</body>

</html>
